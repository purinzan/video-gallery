<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>合法動画ギャラリー</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: sans-serif; background: #111; color: #fff; margin: 0; padding: 0; display: flex; flex-direction: column; min-height: 100vh; }
    header { background: #222; padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
    header .logo { font-size: 1.2rem; }
    header nav { display: flex; gap: 1rem; }
    header nav a { color: #0bf; text-decoration: none; }
    #loginToggle { padding: .4rem .8rem; border: none; border-radius: 4px; background: #0bf; color: #111; cursor: pointer; font-size: .9rem; }
    #adminBadge { display: none; color: orange; font-weight: bold; margin-left: 8px; }

    .main-content { display: flex; flex: 1; }
    .sidebar { width: 200px; background: #1c1c1c; padding: 1rem; overflow-y: auto; }
    .sidebar h3 { margin-top: 0; }
    .sidebar .tag { display: block; padding: .25rem .5rem; margin: .25rem 0; background: #333; border-radius: 4px; color: #fff; cursor: pointer; }
    .sidebar .tag.active { background: #0bf; color: #111; }

    .container { flex: 1; max-width: 1000px; margin: auto; padding: 1rem; }
    .search-bar { margin-bottom: 1rem; text-align: center; }
    .search-bar form { display: inline-block; width: 100%; max-width: 800px; }
    .search-bar input { padding: .5rem; font-size: 1rem; width: 70%; border: none; border-radius: 4px 0 0 4px; }
    .search-bar button { padding: .5rem 1rem; font-size: 1rem; border: none; border-radius: 0 4px 4px 0; background: #0bf; color: #111; cursor: pointer; }

    /* タグ一覧（モバイル用） */
    .mobile-tags { display: none; margin-bottom: 1rem; overflow-x: auto; padding: .5rem 0; }
    .mobile-tags .tag { flex: 0 0 auto; margin-right: .5rem; }

    .selected-tags { margin: .5rem 0 1rem; }
    .selected-tags span { display: inline-block; background: #0bf; color: #111; padding: 2px 8px; margin: 0 5px 5px 0; border-radius: 4px; font-size: .8rem; }

    .video-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
    .video-card { background: #1e1e1e; border-radius: 8px; overflow: hidden; position: relative; cursor: pointer; transition: transform .3s ease; }
    .video-card:hover { transform: scale(1.02); }
    .video-card img { width: 100%; aspect-ratio: 16/10; object-fit: cover; }
    .video-card h3 { margin: .5rem; font-size: .9rem; }
    .video-card .tags { margin: .5rem; font-size: .75rem; color: #aaa; }
    .video-card .tags span { background: #333; padding: 2px 6px; margin-right: 5px; border-radius: 4px; }

    .favorite-btn, .edit-btn { position: absolute; top: 8px; font-size: 1.2rem; background: transparent; border: none; cursor: pointer; z-index: 2; }
    .favorite-btn { right: 8px; color: gold; }
    .favorite-btn.active { color: orange; }
    .edit-btn { left: 8px; color: #0bf; display: none; }
    .video-card.admin .edit-btn { display: block; }

    .pagination { text-align: center; margin-top: 2rem; }
    .pagination button { padding: .5rem 1rem; background: #333; color: #fff; border: none; margin: 0 5px; border-radius: 4px; cursor: pointer; }
    .pagination span { margin: 0 10px; font-size: .9rem; color: #ccc; }

    .modal { position: fixed; inset: 0; background: rgba(0,0,0,.8); display: none; justify-content: center; align-items: center; }
    .modal iframe { width: 90%; height: 90vh; max-width: 960px; }

    /* ログインダイアログ */
    #passwordOverlay { position: fixed; inset: 0; background: rgba(0,0,0,.92); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 10000; }
    #passwordOverlay input, #passwordOverlay button { width: 220px; }

    /* Responsive */
    @media (max-width: 768px) {
      header { flex-direction: column; gap: .5rem; }
      header nav { flex-wrap: wrap; justify-content: center; }
      .main-content { flex-direction: column; }
      .sidebar { display: none; }
      .mobile-tags { display: flex; }
      .container { padding: .5rem; }
      .search-bar input { width: 60%; }
      .video-grid { grid-template-columns: 1fr; }
      .pagination { margin-top: 1rem; }
    }
  </style>
</head>
<body>
  <!-- パスワード入力オーバーレイ -->
  <div id="passwordOverlay">
    <h2>管理者ログイン</h2>
    <input type="password" id="passwordInput" placeholder="パスワードを入力">
    <button id="loginBtn" type="button">ログイン</button>
  </div>

  <header>
    <div class="logo">合法動画ギャラリー</div>
    <nav>
      <a href="index.html">ホーム</a>
      <a href="about.html">about</a>
      <a href="favorites.html">お気に入り</a>
    </nav>
    <button id="loginToggle" type="button">管理者ログイン</button>
    <span id="adminBadge">管理モード</span>
  </header>

  <div class="main-content">
    <aside class="sidebar">
      <h3>タグで絞り込み</h3>
      <div id="tagList"></div>
    </aside>
    <div class="container">
      <div class="search-bar">
        <form onsubmit="return false;">
          <input type="text" id="searchInput" placeholder="動画タイトルまたはタグを検索...">
          <button type="button">検索</button>
        </form>
      </div>
      <!-- モバイル時に表示するタグリスト -->
      <div class="mobile-tags" id="mobileTagList"></div>
      <div id="selectedTags" class="selected-tags"></div>
      <div class="video-grid" id="videoGrid"></div>
      <div class="pagination">
        <button type="button" onclick="prevPage()">前へ</button>
        <span id="pageInfo"></span>
        <button id="nextButton" type="button" onclick="nextPage()">次へ</button>
      </div>
    </div>
  </div>

  <div class="modal" id="modal" onclick="closeModal()">
    <iframe id="modalVideo" src="" frameborder="0" allowfullscreen></iframe>
  </div>

<script>
// (JavaScript unchanged)
// 追加: モバイル用タグ表示同期
function renderTags() {
  const tags = [...new Set(videoData.flatMap(v => v.tags))].sort();
  const html = tags.map(tag =>
    `<span class=\"tag ${selectedTags.includes(tag) ? 'active' : ''}\" onclick=\"toggleTag('${tag}')\">${tag}</span>`
  ).join('');
  document.getElementById('tagList').innerHTML = html;
  document.getElementById('mobileTagList').innerHTML = html;
}
</script>
</body>
</html>
